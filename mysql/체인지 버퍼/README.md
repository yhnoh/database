### 1. 체인지 버퍼 (Chagne Buffer)
- 체인지 버퍼는 변경하려는 레코드가 버퍼풀에 없을 때, 보조 키의 변경사항에 대해서 캐싱하는 임시 메모리 공간이다.
  - 인덱스 업데이트 작업에 대해서 캐싱을 하는 이유는 인덱스의 변경이 많은 자원을 소모할 수 있기 때문이다.
  - 때문에 체인지 버퍼에 변경 내역을 저장하고 사용자에게 결과를 반환하고, 인덱스 업데이트 작업은 지연처리하도록 설계되어 있다.
- 사용자에게 결과를 반환하기 전에 반드시 인덱스에서 중복 여부를 체크해야하는 프라이머리키나 유니크 인덱스는 체인지 버퍼를 사용할 수 없다.

#### 1.1. 체인지 버퍼에 있는 변경 내용이 디스크에 반영되는 과정
![](./img/innodb_change_buffer.png)

1. 레코드 쓰기 작업 시, 인덱스 업데이트 작업을 지연시키기 위해서 체인지 버퍼에 변경 사항 적재
2. 체인지 버퍼에 있는 내용을 버퍼풀에 적재
   - 다른 읽기 작업을 통해서 체인지 버퍼에 있는 내용이 버퍼풀에 적재 된다.
3. 버퍼풀에 적재된 내용을 백그라운드 스레드를 통해서 디스크에 쓰기작업 진행 

> https://dev.mysql.com/doc/refman/8.0/en/innodb-change-buffer.html
> Real MySql 8.0 개발자와 DBA를 위한 MySQL 실전 가이드, 백은비,이성욱, P129-130