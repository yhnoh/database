### 1.서브 쿼리 최적화
- 실무에서 쿼리르 작성하다보면 서브 쿼리를 통하여 질의하는 경우가 존재하다. 이때 옵티마이저는 사용자가 작성한 SQL문을 최적화하여 가장 빠른 결과 집합을 응답할 수 있도록 쿼리 변환을 진행한다. 하지만 옵티마이저가 모든 경우의 SQL문에 대해서 최적화를 진행해 주지 않는다.
- 서브 쿼리를 잘못 사용하게 될 경우 느린 쿼리의 원인이 될 수 있기 때문에 옵티마이저가 어떤 경우에 서브쿼리를 최적화해주는지 알고 있는 것이 중요하다.
- 기본적으로 서브쿼리를 작성하게 되면 대부분의 경우 옵티마이저는 조인을 통해서 쿼리 최적화를 시도하려고 한다.
    ```sql
    -- 사용자가 작성한 쿼리
    select * from t1 where t1.c1 in (select t2.c1 from t2);

    -- 옵티마이저가 변환한 쿼리
    select t1.* from t1 inner join t2 on t1.c1 = t2.c1;
    ```
- 쿼리 최적화를 하는 이유는 서브 쿼리를 통해서 나온 결과물은 인덱스를 사용하지 못할 수 있고, 잘못하면 하나의 레코드당 한번씩 쿼리를 수행해야 할 수도 있기 때문이다.

#### 1.1. 서브 쿼리 사용하는 위치에 따른 분류
- 서브쿼리를 DBMS마다 다르게 분류를 하는데 사용하는 위치에 따라서 세 가지의 서브쿼리로 분류할 수 있다.

1. 스칼라 서브 쿼리 (Scalar Subquery)
- SELECT문에 있는 서브쿼리 절로 하나의 레코드당 하나의 값을 반환하는 서브쿼리이다.
2. 중첩된 서브 쿼리 (Nested Subquery)
- WHERE 절에 사용되는 서브쿼리를 말한다.
3. 인라인 뷰 (Inline View)
- FROM 절에 사용하는 서브 쿼리를 말한다.


### MySQL에서의 서브 쿼리 최적화


> https://dev.mysql.com/doc/refman/8.0/en/subquery-optimization.html