## Redis
Redis는 인메모리 데이터 저장소로서, 빠른 속도와 높은 성능을 제공한다. 때문에 일반적인 하드디스크 기반의 데이터베이스보다 훨씬 빠른 응답 시간을 제공할 수 있다. <br/>
또한 Redis는 다양한 데이터 구조를 지원하며, 단순한 키-값 저장소 이상의 기능을 제공한다. 다양한 데이터 구조를 지원하기 때문에, 단순 한 캐시 용도 뿐만 아니라 특정한 요구사항에 맞게 효율적으로 활용할 수 있다. 이는 다른 인메모리 데이터 저장소와 차별화되는 중요한 특징 중 하나이다. <br/>
또한 메시징 서비스의 역할 수행, 클러스터링 및 복제를 통한 고가용성 및 확장성 확보, 영속성을 통한 백업 및 복구 기능 제공 등 다양한 부가 기능도 제공한다. 
위에서 이야기한 레디스의 주요 특정을 정리하면 다음과 같다.
- 인메모리 데이터 저장소로서 빠른 속도와 높은 성능 제공
- 다양한 데이터 구조의 지원으로 요구사항을 효율적으로 처리
- 메시징 서비스 역할 수행 가능
- 클러스터링 및 복제를 통한 고가용성 및 확장성 확보
- 영속성을 통한 백업 및 복구 기능 제공

## Redis Architecture
![](img/redis_architecture.png)


Redis는 단일 스레드 기반의 아키텍처를 가지고 있다. 다만 Redis가 단일 스레드 기반이라고해서 모든 작업이 단일 스레드로 처리되는 것은 아니다. 예를 들어 I/O 작업의 경우 별도의 스레드에서 처리되며, 백업이나 동기화 작업과 같은 경우에는 백그라운드 스레드에서 처리된다. 메인 스레드는 단순히 **_입력 받은 명령어를 실제 실행하고 결과를 반환하는 역할만 수행_** 한다. <br/>
이러한 단일 스레드 기반 아키텍처는 다음과 같은 장점이 있다.
- **_동기화 매커니즘 불필요_**: 멀티 스레드 환경에서는 공유 자원 접근시 동기화 매커니즘이 필요하지만, 단일 스레드 가반에서는 이러한 동기화 매커니즘이 불필요하다. 이로 인해서 레디스는 **_원자성을 보장할 수 있으며, 동시성 문제에 대한 복잡성을 줄이며, 성능을 향상시킬 수 있다._**
- **_컨텍스트 스위칭 비용 감소_**: 멀티 스레드 환경에서는 스레드 간의 컨텍스트 스위칭이 발생하며, 이로 인해서 성능 저하가 발생할 수 있다. 단일 스레드 기반에서는 이러한 컨텍스트 스위칭 비용이 없다.

### Redis 사용시 주의사항
Redis는 단일 스레드 기반 아키텍처를 가지고 있기 때문에, 명령어를 실행하는 **_메인 스레드가 블로킹되는 상황이 발생하면 전체 시스템의 성능 저하가 발생_**할 수 있다. 따라서 다음과 같은 주의사항을 고려해야 한다.
- **_시간 복잡도가 높은 명령어 주의_**: 시간 복잡도가 높은 명령어(예: KEYS, SMEMBERS, HGETALL 등)는 메인 스레드를 블로킹할 수 있으므로 주의해야 한다. 이러한 명령어는 대용량 데이터셋에서 실행할 경우 성능 저하를 초래할 수 있다.
- **_키 삭제 주의_**: 많은 수의 키를 한 번에 삭제하는 명령어(예: DEL, FLUSHDB)은 메인 스레드를 블로킹할 수 있으므로 주의해야 한다. 이러한 명령어는 대용량 데이터셋에서 실행할 경우 성능 저하를 초래할 수 있다. 
때문에 비동기 키 삭제 명령어(`UNLINK`, `FLUSHDB AYSNC`)를 사용하여 메인 스레드의 블로킹을 방지하거나 `redis.conf` 파일에서  `lazyfree-lazy-user-del yes`, `lazyfree-lazy-server-del yes`, `lazyfree-lazy-server-del yes` 옵션을 활성화하여 비동기적으로 키를 삭제하는 것이 좋다.
- **_TTL 설정 주의_**: 키 삭제 명령어와 마찬가지로, 많은 수의 키가 동시에 만료되는 상황이 발생하면 메인 스레드를 블로킹할 수 있으므로 주의해야 한다.
`redis.conf` 파일에서 `lazyfree-lazy-expire yes` 옵션을 활성화하여 비동기적으로 만료된 키를 삭제하는 것이 좋다.
- **_대용량 데이터 처리 주의_**: Redis는 인메모리 데이터 저장소이기 때문에, 저장하는 데이터의 크기에 제한이 있다. 너무 큰 데이터를 저장할 경우 메모리 부족 현상이 발생할 수 있으므로 주의해야 한다.

> [Redisgate > LAZYFREE](https://redisgate.kr/redis/configuration/param_lazyfree.php) <br/>
> [Redisgate > RENAME-COMMAND](https://redisgate.kr/redis/configuration/param_rename-command.php)



- [데이터타입](./데이터타입)
- [활용](./활용)
- [트랜잭션](./트랜잭션)
- [캐시](./캐시/)
- [영속성](./영속성/)
- [복제](./복제/)